(function(e){function t(t){for(var n,s,i=t[0],l=t[1],c=t[2],p=0,f=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,i=1;i<o.length;i++){var l=o[i];0!==a[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},a={app:0},r=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-polygon-cropper/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var n=o("85ec"),a=o.n(n);a.a},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("h1",{staticClass:"mb-4 mt-2 alert-success"},[e._v("SecodApp - POC")]),o("b-row",[o("div",{staticClass:"container padding-left"},[o("h2",[e._v("Antes de iniciar, nombra tu sesion")]),o("div",[o("b-input",{attrs:{placeholder:"Nombre"},model:{value:e.palabra,callback:function(t){e.palabra=t},expression:"palabra"}})],1),o("div",{staticClass:"margin-top"},[o("b-button-group",[o("b-button",{staticClass:"padding-right-2",attrs:{variant:"success",type:"submit",disabled:!e.palabra},on:{click:function(t){t.preventDefault(),e.hide+=1}}},[e._v("Crear Sesion")]),o("b-button",{staticClass:"padding-left-2",attrs:{variant:"danger"},on:{click:function(t){t.preventDefault(),e.hide=0}}},[e._v("Cerrar Sesion")])],1)],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:1==e.hide,expression:"hide == 1 "}]},[o("b-row",[o("b-col",[o("b-form-group",[o("b-form-file",{staticClass:"col-sm-6 mt-2",attrs:{state:Boolean(e.file),accept:"image/*","drop-placeholder":"Arrastra tu imagen aqui",placeholder:"Selecciona la imagen a cargar...",size:"lg"},on:{change:e.setImage},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),o("div",{staticClass:"mt-3"},[e._v("Selected file: "+e._s(e.file?e.file.name:""))])],1)],1)],1),o("div",[o("b-img",{directives:[{name:"show",rawName:"v-show",value:e.showResult,expression:"showResult"}],attrs:{src:e.resultImage,alt:"Responsive image",fluid:""}}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.showResult,expression:"showResult"}]},[o("b-link",{attrs:{href:e.resultImage,download:"result.png"}},[e._v("Download Image")])],1)],1),o("div",[o("polygonCrop",{ref:"canvas",attrs:{canvasClass:"some-class",height:600,imageSource:e.imgSrc,showCanvas:e.show,showPointer:e.showPointer,width:800}}),o("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.crop(t)}}},[e._v("Cortar")]),o("b-button",{attrs:{variant:"danger"},on:{click:function(t){return t.preventDefault(),e.clear(t)}}},[e._v("Limpiar")])],1),o("div",[o("b-table",{attrs:{striped:"",hover:"",items:e.puntos,fields:e.tableConf},scopedSlots:e._u([{key:"cell(index)",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"cell(acciones)",fn:function(t){return[o("b-button",{attrs:{variant:"success"},on:{click:function(o){return e.test({id:t.index+1,item:t.item})}}},[e._v("Guardar")])]}}])})],1)],1)],1)},r=[],s=(o("c975"),o("d81d"),o("fb6a"),o("931c")),i=o("2591"),l={apiKey:"AIzaSyBvxotCyjPLG67LKs5rxS5QubZkXkjhxNw",authDomain:"secodapp-poc.firebaseapp.com",projectId:"secodapp-poc",storageBucket:"secodapp-poc.appspot.com",messagingSenderId:"355091368541",appId:"1:355091368541:web:5480fedaf9c9699621dbb4"},c=null;c=i["a"].apps.length?i["a"].app():i["a"].initializeApp(l);var u=c.firestore(),p=function(){return u},f=p(),d={name:"App",data:function(){return{imgSrc:"/demo.png",hide:0,file:null,show:!1,showResult:!1,showPointer:!0,resultImage:"",puntos:[],tableConf:["index","nombre",{key:"poligono",label:"Puntos",formatter:function(e){return e["normal"]}},"acciones"],palabra:""}},components:{polygonCrop:s["a"]},methods:{setImage:function(e){var t=this;console.log(this.$refs.canvas);var o=e.target.files[0];if(o||-1!==o.type.indexOf("image/"))if("function"===typeof FileReader){var n=new FileReader;n.onload=function(e){t.imgSrc=e.target.result,t.show=!0},n.readAsDataURL(o)}else alert("Sorry, FileReader API not supported");else alert("Please select an image file")},ver:function(e){console.log(e["poligono"]["fijo"]),this.$refs.canvas.currentMarks=e["poligono"]["fijo"],this.$refs.canvas.crop(),this.resultImage=this.$refs.canvas.resultImage,this.show=!1,this.showResult=!0},crop:function(){console.log(this.$refs.canvas.currentMarks);for(var e=this.$refs.canvas.currentMarks,t=[],o=[],n=2,a=0;a<e.length;a+=n)t.push(e.slice(a,a+n)),o.push({punto:e.slice(a,a+n)});this.puntos.push({poligono:{procesado:o,normal:t,fijo:e}}),console.log(t),this.show=!0,this.showResult=!1,this.$refs.canvas.reset()},undo:function(){this.$refs.canvas.undo()},clear:function(){this.puntos=[]},redo:function(){this.$refs.canvas.redo()},reset:function(){this.show=!0,this.showResult=!1,this.$refs.canvas.reset()},test:function(e){console.log(this.palabra),console.log(e.id),console.log(e.item.poligono.normal);var t={numtrazo:e.id,coordenadas:e.item.poligono.normal.map((function(e){return JSON.stringify(e)}))};f.collection("Sesiones").doc(this.palabra).collection("poligonos").add(t),alert("Guardado en la base de datos con exito")}}},h=d,v=(o("034f"),o("2877")),g=Object(v["a"])(h,a,r,!1,null,null,null),m=g.exports,b=o("5f5b"),w=o("b1e0");o("f9e3"),o("2dd8");n["default"].config.productionTip=!1,n["default"].use(b["a"]),n["default"].use(w["a"]),new n["default"]({render:function(e){return e(m)}}).$mount("#app")},"85ec":function(e,t,o){}});
//# sourceMappingURL=app.9f18dacd.js.map